import{c as b,u as _,j as e,t as h,r as p,T as E,X as $,M as P,a as T,d as I,f as z,b as A,m as f,A as M,E as O}from"./index-Bmo1lgvl.js";import{C as R}from"./circle-alert-DEfECA1e.js";/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],v=b("circle-check-big",D);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],L=b("circle-x",F);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],k=b("clock",q);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],H=b("dollar-sign",U);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],G=b("log-out",V);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],J=b("package",B);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],w=b("square-pen",X);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],K=b("trending-up",W),Q=()=>{const t=_(),l=()=>{localStorage.removeItem("isAuthenticated"),h.success("Logout realizado com sucesso!"),t("/")};return e.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-destructive/10 hover:bg-destructive/20 text-destructive rounded-lg transition-colors",title:"Sair",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sair"})]})},Y=({items:t,onUpdate:l})=>{const[n,c]=p.useState(null),[a,i]=p.useState({}),[m,s]=p.useState(!1),d=r=>{c(r),i({nome:r.nome,descricao:r.descricao,preco:r.preco,categoria:r.categoria,imagem_url:r.imagem_url})},x=async()=>{if(n){s(!0);try{const r={nome:a.nome,descricao:a.descricao,preco:a.preco,categoria:a.categoria,imagem_url:a.imagem_url},y=await fetch(`http://localhost:8000/api/itens/${n.id}/`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!y.ok){const g=await y.json().catch(()=>({}));console.error("Erro detalhado:",g);let u="Erro ao atualizar item";throw g.detail?u=g.detail:typeof g=="object"&&(u=Object.entries(g).map(([C,N])=>{const S=Array.isArray(N)?N:[N];return`${C}: ${S.join(", ")}`}).join("; ")||JSON.stringify(g)),new Error(u)}h.success("Item atualizado com sucesso!"),c(null),l()}catch(r){console.error("Erro ao salvar:",r),h.error(r instanceof Error?r.message:"Erro ao atualizar item")}finally{s(!1)}}},o=async r=>{if(confirm("Tem certeza que deseja deletar este item?")){s(!0);try{if(!(await fetch(`http://localhost:8000/api/itens/${r}/`,{method:"DELETE"})).ok)throw new Error("Erro ao deletar item");h.success("Item deletado com sucesso!"),l()}catch(y){console.error("Erro ao deletar:",y),h.error("Erro ao deletar item")}finally{s(!1)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Itens do Cardápio"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Gerencie os produtos do seu cardápio (UC007)"})]}),t.length===0?e.jsx("div",{className:"bg-card rounded-xl border border-border p-12 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Nenhum item cadastrado ainda"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(r=>e.jsxs("div",{className:"bg-card rounded-xl border border-border overflow-hidden hover:border-primary/50 transition-colors",children:[r.imagem_url&&e.jsx("img",{src:r.imagem_url,alt:r.nome,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:r.nome}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:r.descricao}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-primary",children:["R$ ",parseFloat(r.preco).toFixed(2)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(r),className:"p-2 bg-primary/10 hover:bg-primary/20 text-primary rounded-lg transition-colors",children:e.jsx(w,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>o(r.id),disabled:m,className:"p-2 bg-destructive/10 hover:bg-destructive/20 text-destructive rounded-lg transition-colors disabled:opacity-50",children:e.jsx(E,{className:"w-4 h-4"})})]})]})]})]},r.id))}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-card rounded-xl border border-border max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Editar Item"}),e.jsx("button",{onClick:()=>c(null),className:"p-1 hover:bg-primary/10 rounded-lg transition-colors",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Nome"}),e.jsx("input",{type:"text",value:a.nome||"",onChange:r=>i({...a,nome:r.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Descrição"}),e.jsx("textarea",{value:a.descricao||"",onChange:r=>i({...a,descricao:r.target.value}),rows:3,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:border-primary resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Preço (R$)"}),e.jsx("input",{type:"number",step:"0.01",value:a.preco||"",onChange:r=>i({...a,preco:parseFloat(r.target.value)}),className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:border-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"URL da Imagem"}),e.jsx("input",{type:"text",value:a.imagem_url||"",onChange:r=>i({...a,imagem_url:r.target.value}),className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:border-primary"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-6",children:[e.jsx("button",{onClick:()=>c(null),className:"flex-1 px-4 py-2 bg-background border border-border text-foreground rounded-lg hover:bg-background/80 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:x,disabled:m,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",children:m?"Salvando...":"Salvar"})]})]})})]})},Z=({orders:t,onUpdate:l})=>{const[n,c]=p.useState(null),a=async(s,d)=>{c(s);try{await T(s,d),h.success("Status atualizado com sucesso!"),l()}catch{h.error("Erro ao atualizar status")}finally{c(null)}},i=async s=>{c(s);try{await I(s),h.success("Pedido cancelado e removido!"),l()}catch{h.error("Erro ao cancelar pedido")}finally{c(null)}},m=s=>{const d={pendente:"bg-yellow-100 text-yellow-800",preparando:"bg-blue-100 text-blue-800",pronto:"bg-green-100 text-green-800",entregue:"bg-gray-100 text-gray-800",cancelado:"bg-red-100 text-red-800"};return d[s]||d.pendente};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Gerenciar Pedidos"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Visualize e atualize o status dos pedidos (UC008, UC009, UC010)"})]}),t.length===0?e.jsx("div",{className:"bg-card rounded-xl border border-border p-12 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Nenhum pedido encontrado"})}):e.jsx("div",{className:"space-y-4",children:t.map(s=>{var d,x;return e.jsxs("div",{className:"bg-card rounded-xl border border-border p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-foreground",children:["Pedido #",s.id]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.nome_cliente," • Mesa ",s.mesa]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.criado_em||"").toLocaleString("pt-BR")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["R$ ",parseFloat(s.total).toFixed(2)]}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium mt-2 ${m(s.status)}`,children:s.status})]})]}),e.jsx("div",{className:"mb-4 space-y-2",children:(d=s.itens)==null?void 0:d.map((o,r)=>e.jsxs("div",{className:"flex justify-between text-sm bg-background p-2 rounded",children:[e.jsxs("span",{children:[o.quantidade,"x ",o.nome_item]}),e.jsxs("span",{className:"font-medium",children:["R$ ",(o.quantidade*parseFloat(o.preco_item)).toFixed(2)]})]},r))}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>a(s.id,"preparando"),disabled:n===s.id||s.status==="preparando",className:"flex items-center gap-2 px-3 py-2 bg-blue-100 text-blue-800 rounded-lg hover:bg-blue-200 transition-colors disabled:opacity-50 text-sm",children:[e.jsx(k,{className:"w-4 h-4"}),"Preparando"]}),e.jsxs("button",{onClick:()=>a(s.id,"pronto"),disabled:n===s.id||s.status==="pronto",className:"flex items-center gap-2 px-3 py-2 bg-green-100 text-green-800 rounded-lg hover:bg-green-200 transition-colors disabled:opacity-50 text-sm",children:[e.jsx(v,{className:"w-4 h-4"}),"Pronto"]}),e.jsxs("button",{onClick:()=>a(s.id,"entregue"),disabled:n===s.id||s.status==="entregue",className:"flex items-center gap-2 px-3 py-2 bg-gray-100 text-gray-800 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 text-sm",children:[e.jsx(v,{className:"w-4 h-4"}),"Entregue"]}),e.jsxs("button",{onClick:()=>i(s.id),disabled:n===s.id,className:"flex items-center gap-2 px-3 py-2 bg-red-100 text-red-800 rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50 text-sm",children:[e.jsx(L,{className:"w-4 h-4"}),"Cancelar"]})]}),((x=s.itens)==null?void 0:x.some(o=>o.observacao))&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-yellow-800 mb-1",children:"Observações:"}),s.itens.map((o,r)=>o.observacao?e.jsxs("p",{className:"text-yellow-700",children:["• ",o.observacao]},r):null)]})]})}),s.problema&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(R,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-red-800 mb-1",children:"⚠️ Problema Relatado:"}),e.jsx("p",{className:"text-red-700",children:s.problema})]})]})})]},s.id)})})]})},re=()=>{const[t,l]=p.useState("dashboard"),[n,c]=p.useState([]),[a,i]=p.useState([]),[m,s]=p.useState({totalOrders:0,todaySales:0,avgTime:0,monthRevenue:0});p.useEffect(()=>{d()},[]);const d=async()=>{try{console.log("Carregando dados da API...");const[x,o]=await Promise.all([z(),A()]);console.log("Itens recebidos:",x),console.log("Pedidos recebidos:",o),c(x),i(o);const r=new Date().toISOString().split("T")[0],g=o.filter(u=>{var j;return(j=u.criado_em)==null?void 0:j.startsWith(r)}).reduce((u,j)=>u+parseFloat(j.total||"0"),0);s({totalOrders:o.length,todaySales:g,avgTime:18,monthRevenue:o.reduce((u,j)=>u+parseFloat(j.total||"0"),0)})}catch(x){console.error("Erro ao carregar dados:",x),c([]),i([])}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-card border-b border-border sticky top-0 z-50",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Painel Administrativo"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Gerencie seu cardápio e pedidos"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("a",{href:"/",className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium",children:"Ver Cardápio"}),e.jsx(Q,{})]})]})})}),e.jsx("div",{className:"bg-card border-b border-border",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:()=>l("dashboard"),className:`px-6 py-3 font-medium transition-colors relative ${t==="dashboard"?"text-primary":"text-muted-foreground hover:text-foreground"}`,children:["Dashboard",t==="dashboard"&&e.jsx(f.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]}),e.jsxs("button",{onClick:()=>l("items"),className:`px-6 py-3 font-medium transition-colors relative ${t==="items"?"text-primary":"text-muted-foreground hover:text-foreground"}`,children:["Itens do Cardápio",t==="items"&&e.jsx(f.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]}),e.jsxs("button",{onClick:()=>l("orders"),className:`px-6 py-3 font-medium transition-colors relative ${t==="orders"?"text-primary":"text-muted-foreground hover:text-foreground"}`,children:["Pedidos",t==="orders"&&e.jsx(f.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(M,{mode:"wait",children:[t==="dashboard"&&e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-card p-6 rounded-xl border border-border shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:e.jsx(J,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Pedidos"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:m.totalOrders})]})]})}),e.jsx("div",{className:"bg-card p-6 rounded-xl border border-border shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-accent/10 rounded-lg",children:e.jsx(K,{className:"w-6 h-6 text-accent"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Vendas Hoje"}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:["R$ ",m.todaySales.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-card p-6 rounded-xl border border-border shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:e.jsx(k,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tempo Médio"}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[m.avgTime," min"]})]})]})}),e.jsx("div",{className:"bg-card p-6 rounded-xl border border-border shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-accent/10 rounded-lg",children:e.jsx(H,{className:"w-6 h-6 text-accent"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receita Total"}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:["R$ ",m.monthRevenue.toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("button",{onClick:()=>l("items"),className:"bg-card p-6 rounded-xl border border-border hover:border-primary transition-all group text-left",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 group-hover:bg-primary/20 rounded-lg transition-colors",children:e.jsx(w,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Gerenciar Itens"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Adicionar ou editar produtos"})]})]})}),e.jsx("button",{onClick:()=>l("orders"),className:"bg-card p-6 rounded-xl border border-border hover:border-primary transition-all group text-left",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-accent/10 group-hover:bg-accent/20 rounded-lg transition-colors",children:e.jsx(O,{className:"w-6 h-6 text-accent"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Ver Pedidos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Acompanhar pedidos ativos"})]})]})}),e.jsx("div",{className:"bg-card p-6 rounded-xl border border-border",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:e.jsx(v,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"Sistema Ativo"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tudo funcionando"})]})]})})]})]},"dashboard"),t==="items"&&e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:e.jsx(Y,{items:n,onUpdate:d})},"items"),t==="orders"&&e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:e.jsx(Z,{orders:a,onUpdate:d})},"orders")]})})]})};export{re as default};
